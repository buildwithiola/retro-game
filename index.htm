<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Kawaii Retro Game</title>
<style>
  body {
    margin: 0;
    background: linear-gradient(#ffe6f0, #ffe6ff);
    overflow: hidden;
  }
  canvas {
    display: block;
    margin: auto;
    background: #ffd1dc;
    border: 5px solid #ff99bb;
    border-radius: 12px;
  }
</style>
</head>
<body>
<canvas id="gameCanvas" width="400" height="600"></canvas>
<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

const playerImg = new Image();
playerImg.src = "https://raw.githubusercontent.com/buildwithiola/retro-game/main/kling_20250814_Text_to_Image_Pastel_kaw_1357_0.png?v=2";

const obstacleImg = new Image();
obstacleImg.src = "https://raw.githubusercontent.com/buildwithiola/retro-game/main/kling_20250814_Text_to_Image_Pastel_kaw_1357_1.png?v=2";

const backgroundImg = new Image();
backgroundImg.src = "https://raw.githubusercontent.com/buildwithiola/retro-game/main/kling_20250814_Text_to_Image_Pastel_kaw_1357_2.png?v=2";

let player = { x: 180, y: 500, width: 50, height: 50, speed: 5 };
let obstacles = [];
let frame = 0;
let score = 0;

document.addEventListener("keydown", (e) => {
  if (e.key === "ArrowLeft") player.x -= player.speed;
  if (e.key === "ArrowRight") player.x += player.speed;
});

function drawBackground() {
  ctx.drawImage(backgroundImg, 0, 0, canvas.width, canvas.height);
}

function drawPlayer() {
  ctx.drawImage(playerImg, player.x, player.y, player.width, player.height);
}

function drawObstacles() {
  obstacles.forEach((o) => {
    ctx.drawImage(obstacleImg, o.x, o.y, o.width, o.height);
  });
}

function updateObstacles() {
  if (frame % 100 === 0) {
    obstacles.push({
      x: Math.random() * 350,
      y: -50,
      width: 50,
      height: 50,
      speed: 2
    });
  }
  obstacles.forEach((o) => o.y += o.speed);
  obstacles = obstacles.filter((o) => o.y < canvas.height);
}

function detectCollision() {
  for (let o of obstacles) {
    if (
      player.x < o.x + o.width &&
      player.x + player.width > o.x &&
      player.y < o.y + o.height &&
      player.y + player.height > o.y
    ) {
      alert("Game Over! Score: " + score);
      document.location.reload();
    }
  }
}

function drawScore() {
  ctx.fillStyle = "#ff66aa";
  ctx.font = "20px Arial";
  ctx.fillText("Score: " + score, 10, 30);
}

function gameLoop() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawBackground();
  drawPlayer();
  drawObstacles();
  drawScore();
  updateObstacles();
  detectCollision();
  frame++;
  score++;
  requestAnimationFrame(gameLoop);
}

backgroundImg.onload = () => {
  gameLoop();
};
</script>
</body>
</html>
